<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hey Nova ‚Äî Dip Edition</title>
  <style>
    /* --------- Basic reset & font --------- */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#071021 0%, #071428 40%, #041126 100%);
      color:#e6f7ff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    /* ---------- animated gradient blobs ---------- */
    .bg-blob{
      position: fixed;
      width:420px;
      height:420px;
      filter: blur(80px);
      opacity:.12;
      border-radius:50%;
      z-index:0;
      transform:translate3d(0,0,0);
      mix-blend-mode:screen;
    }
    .blob-1{ background: radial-gradient(circle at 30% 30%, #00ffc2, #008cff 60%); top: -120px; left:-120px; animation: float1 12s ease-in-out infinite; }
    .blob-2{ background: radial-gradient(circle at 70% 60%, #ffb86b, #ff6bcb 55%); bottom:-160px; right:-140px; animation: float2 14s ease-in-out infinite; }
    @keyframes float1 { 0%{transform:translateY(0) translateX(0);} 50%{transform:translateY(30px) translateX(20px);} 100%{transform:translateY(0) translateX(0);} }
    @keyframes float2 { 0%{transform:translateY(0) translateX(0);} 50%{transform:translateY(-30px) translateX(-20px);} 100%{transform:translateY(0) translateX(0);} }

    /* ---------- container (glass card) ---------- */
    .card {
      position: relative;
      z-index:2;
      width:100%;
      max-width:980px;
      min-height:560px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      box-shadow: 0 10px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      backdrop-filter: blur(10px) saturate(120%);
      border: 1px solid rgba(255,255,255,0.04);
      padding:22px;
      display:grid;
      grid-template-columns: 360px 1fr;
      gap:18px;
      overflow:hidden;
    }

    /* ---------- left column: controls/profile ---------- */
    .left {
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:center;
    }
    .brand {
      width:100%;
      display:flex;
      align-items:center;
      gap:12px;
    }
    .logo {
      width:68px; height:68px; border-radius:14px;
      background:linear-gradient(135deg,#00ffb3,#2bd1ff);
      display:flex; align-items:center; justify-content:center;
      box-shadow: 0 6px 20px rgba(43,209,255,0.08), 0 1px 0 rgba(255,255,255,0.06) inset;
      font-weight:700; color:#001422;
      font-size:22px;
    }
    .brand h1{ font-size:18px; color:#e6fff6; letter-spacing:0.2px; }
    .brand p{ font-size:12px; color:#bfeef3; opacity:0.9; margin-top:4px }

    .orb {
      margin-top:8px;
      width:220px; height:220px;
      border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      background: radial-gradient(circle at 30% 30%, rgba(0,255,179,0.06), rgba(0,139,255,0.04));
      box-shadow: 0 8px 30px rgba(0,255,179,0.03), inset 0 -6px 30px rgba(0,0,0,0.2);
      position:relative;
    }
    .orb .ring {
      width:120px;height:120px;border-radius:50%;
      border: 3px solid rgba(0,255,179,0.12);
      display:flex;align-items:center;justify-content:center;
      animation: pulse 2s infinite;
    }
    .orb .mic {
      width:56px;height:56px;border-radius:50%;
      background: #00ffb3; display:flex;align-items:center;justify-content:center;
      color:#002126;font-weight:700;font-size:20px;
      box-shadow:0 6px 18px rgba(0,255,179,0.12);
    }
    @keyframes pulse {
      0%{ transform:scale(1); opacity:0.9 }
      50%{ transform:scale(1.12); opacity:0.6 }
      100%{ transform:scale(1); opacity:0.9 }
    }

    .controls { width:100%; display:flex; gap:8px; margin-top:10px; flex-wrap:wrap; justify-content:center; }
    .btn {
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.05);
      padding:10px 14px; border-radius:12px; color:#e7fff9; cursor:pointer;
      display:inline-flex; gap:8px; align-items:center; font-weight:600; font-size:14px;
    }
    .btn.important{ background:linear-gradient(90deg,#00ffb3,#2bd1ff); color:#001421; font-weight:700; box-shadow:0 6px 18px rgba(43,209,255,0.08); }

    .small { font-size:13px; color:#cfeff6; opacity:0.9; margin-top:8px; text-align:center; }

    /* ---------- right column: chat area ---------- */
    .right {
      display:flex; flex-direction:column; gap:12px;
    }
    .chatHeader {
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .chatTitle {
      font-size:16px; font-weight:700; color:#e6fff6;
    }
    .sub { font-size:12px; color:#bfeef3; opacity:0.9; }

    #chatBox {
      height:420px; overflow:auto; padding:14px; border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      border:1px solid rgba(255,255,255,0.02);
    }
    .bubble {
      max-width:78%;
      padding:10px 12px;
      margin:8px 0;
      border-radius:14px;
      line-height:1.3;
      word-break:break-word;
    }
    .bubble.user {
      background:linear-gradient(90deg,#053a54,#0b6b8f);
      color:#d7f7ff;
      margin-left:auto;
      border-bottom-right-radius:4px;
    }
    .bubble.nova {
      background: linear-gradient(90deg,#061a2a,#0e2b3f);
      color:#ffe9b8;
      border-bottom-left-radius:4px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.35);
    }

    .inputRow {
      display:flex; gap:10px; align-items:center; margin-top:6px;
    }
    .textInput {
      flex:1; background:transparent; border:1px solid rgba(255,255,255,0.04); padding:10px 12px; border-radius:12px; color:#e6fff6;
    }

    /* ---------- footer small note ---------- */
    .foot {
      margin-top:6px; font-size:12px; color:#bfeef3; opacity:0.85; text-align:center;
    }

    /* responsive */
    @media (max-width:900px) {
      .card { grid-template-columns: 1fr; padding:18px; min-height:640px;}
      .orb { width:160px;height:160px}
    }

  </style>
</head>
<body>

  <!-- subtle animated background blobs -->
  <div class="bg-blob blob-1"></div>
  <div class="bg-blob blob-2"></div>

  <main class="card" role="main" aria-label="Nova AI Assistant">
    <!-- LEFT -->
    <section class="left" aria-hidden="false">
      <div class="brand">
        <div class="logo">NV</div>
        <div>
          <h1>Hey Nova</h1>
          <p>Dip Edition ‚Ä¢ Personal AI companion</p>
        </div>
      </div>

      <div class="orb" title="Listening orb (touch mic to start)">
        <div class="ring" id="ring">
          <div class="mic" id="micBtn" aria-label="Start voice">üé§</div>
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="btnUpload" title="Open upload form">üìÇ Upload</button>
        <button class="btn" id="btnMusic" title="Play music">üéµ Music</button>
        <button class="btn" id="btnTime" title="Current time">‚è∞ Time</button>
        <button class="btn important" id="btnGreet" title="Greet">üëã Greet</button>
      </div>

      <div class="small">Say <strong>"Hey Nova"</strong> or tap mic ‚Ä¢ Multilang (BN/EN/HI)</div>
    </section>

    <!-- RIGHT -->
    <section class="right">
      <div class="chatHeader">
        <div>
          <div class="chatTitle">Conversation</div>
          <div class="sub">Nova listens, learns & adapts to your style</div>
        </div>
        <div style="text-align:right">
          <div style="font-size:12px;color:#bfeef3">Status: <span id="statusText">Idle</span></div>
        </div>
      </div>

      <div id="chatBox" aria-live="polite" role="log"></div>

      <div class="inputRow">
        <input id="manualInput" class="textInput" placeholder="Type a message or press mic..." aria-label="Manual input" />
        <button class="btn" id="sendBtn">Send</button>
      </div>

      <div class="foot">Tip: say <em>"Nova, upload file"</em> to open upload panel ‚Ä¢ Or <em>"Nova, set reminder 8 am gym"</em></div>
    </section>
  </main>

  <script>
    // ---------- basic refs ----------
    const chatBox = document.getElementById('chatBox');
    const statusText = document.getElementById('statusText');
    const micBtn = document.getElementById('micBtn');
    const ring = document.getElementById('ring');
    const btnUpload = document.getElementById('btnUpload');
    const btnMusic = document.getElementById('btnMusic');
    const btnTime = document.getElementById('btnTime');
    const btnGreet = document.getElementById('btnGreet');
    const manualInput = document.getElementById('manualInput');
    const sendBtn = document.getElementById('sendBtn');

    // ---------- speech synthesis setup (try to pick a natural voice) ----------
    const synth = window.speechSynthesis;
    let selectedVoice = null;

    function pickVoice() {
      const voices = synth.getVoices ? synth.getVoices() : [];
      // prefer female & bangla/hi/en voices if available
      selectedVoice = voices.find(v => /female|woman|Google\ W/gi.test(v.name)) ||
                      voices.find(v => v.lang && v.lang.startsWith('bn')) ||
                      voices.find(v => v.lang && v.lang.startsWith('hi')) ||
                      voices.find(v => v.lang && v.lang.startsWith('en')) ||
                      voices[0] || null;
    }
    // voices may load async
    if (synth.onvoiceschanged !== undefined) {
      synth.onvoiceschanged = pickVoice;
    }
    pickVoice();

    function speak(text, opts = {}) {
      // opts: {pitch, rate}
      if(!text) return;
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'bn-BD';
      u.text = text;
      u.pitch = typeof opts.pitch !== 'undefined' ? opts.pitch : 1.03;
      u.rate = typeof opts.rate !== 'undefined' ? opts.rate : 0.96;
      if (selectedVoice) u.voice = selectedVoice;
      synth.cancel();
      synth.speak(u);
      appendNova(text);
    }

    // ---------- chat helpers ----------
    function appendUser(text) {
      const el = document.createElement('div');
      el.className = 'bubble user';
      el.textContent = text;
      chatBox.appendChild(el);
      chatBox.scrollTop = chatBox.scrollHeight;
    }
    function appendNova(text) {
      const el = document.createElement('div');
      el.className = 'bubble nova';
      el.textContent = text;
      chatBox.appendChild(el);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // ---------- voice recognition ----------
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    let recog = null;
    try {
      recog = new SpeechRecognition();
      recog.lang = 'bn-BD';
      recog.interimResults = false;
      recog.maxAlternatives = 1;
    } catch (err) {
      console.warn('SpeechRecognition not supported', err);
      statusText.textContent = 'Voice not supported';
    }

    let listening = false;
    function startListening() {
      if (!recog) { speak('‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶è‡¶á ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ voice ‡¶∞‡¶ø‡¶ï‡¶ó‡¶®‡¶ø‡¶∂‡¶® ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ'); return; }
      try {
        recog.start();
        listening = true;
        statusText.textContent = 'Listening...';
        ring.style.animationPlayState = 'running';
        ring.style.opacity = '1';
      } catch(e){}
    }
    function stopListening() {
      if (!recog) return;
      try { recog.stop(); } catch(e){}
      listening = false;
      statusText.textContent = 'Processing...';
      ring.style.animationPlayState = 'paused';
      ring.style.opacity = '0.9';
    }

    if (recog) {
      recog.onstart = () => { statusText.textContent = 'Listening...'; ring.style.transform = 'scale(1.02)'; }
      recog.onend = () => { if(listening) { /* sometimes onend triggers; mark idle */ } statusText.textContent = 'Idle'; ring.style.transform='scale(1)'; }
      recog.onerror = (ev) => { console.error('REC error',ev); statusText.textContent = 'Error'; speak('‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ ‡¶∞‡¶ø‡¶ï‡¶ó‡¶®‡¶ø‡¶∂‡¶® ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø, ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶¨‡¶≤‡ßã'); }
      recog.onresult = (ev) => {
        stopListening();
        const transcript = ev.results[0][0].transcript.trim();
        appendUser(transcript);
        processCommand(transcript.toLowerCase());
      };
    }

    // ---------- command processing & simple NLP ----------
    function processCommand(raw) {
      // Basic normalization for common bn words
      const cmd = raw.toLowerCase();
      // wake phrase: "hey nova" or "nova"
      if (/^(hey\s*nova|nova|‡¶®‡ßã‡¶≠‡¶æ|‡¶π‡ßá‡¶á ‡¶®‡ßã‡¶≠‡¶æ)/i.test(cmd)) {
        speak('‡¶ú‡¶ø ‡¶¨‡¶≤‡ßÅ‡¶® Dip bhai! ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶õ‡¶ø‡•§');
        return;
      }
      // upload
      if (cmd.includes('upload') || cmd.includes('‡¶´‡¶æ‡¶á‡¶≤') || cmd.includes('‡¶Ü‡¶™‡¶≤‡ßã‡¶°')) {
        speak('‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá, ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶ñ‡ßÅ‡¶≤‡ßá ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡¶ø‡•§');
        window.open('https://forms.gle/eQiyxN8bSS7hdBcH6', '_blank');
        return;
      }
      // music
      if (cmd.includes('‡¶ó‡¶æ‡¶®') || cmd.includes('music') || cmd.includes('play song')) {
        speak('‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶ó‡¶æ‡¶® ‡¶ö‡¶æ‡¶≤‡¶æ‡¶ö‡ßç‡¶õ‡¶ø‡•§');
        window.open('https://www.youtube.com/results?search_query=bengali+song', '_blank');
        return;
      }
      // time
      if (cmd.includes('‡¶∏‡¶Æ‡ßü') || cmd.includes('time') || cmd.includes('‡¶ï‡¶§‡¶ü‡¶æ')) {
        const now = new Date();
        const t = now.toLocaleTimeString('bn-BD');
        speak('‡¶è‡¶ñ‡¶® ‡¶∏‡¶Æ‡ßü ' + t);
        return;
      }
      // reminder (simple parse)
      if (cmd.includes('remind') || cmd.includes('‡¶Æ‡¶®‡ßá') || cmd.includes('‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°')) {
        // very simple extraction: look for a number (hour)
        const m = cmd.match(/(\d{1,2})/);
        if (m) {
          const hour = parseInt(m[1]);
          speak('‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá, ‡¶Ü‡¶Æ‡¶ø ' + hour + ' ‡¶ü‡¶æ‡ßü ‡¶Æ‡¶®‡ßá ‡¶ï‡¶∞‡¶ø‡ßü‡ßá ‡¶¶‡ßá‡¶¨‡•§ (‡¶°‡ßá‡¶Æ‡ßã ‡¶Æ‡ßã‡¶°‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Æ‡ßá‡¶Æ‡ßã ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§)');
          // save locally so Nova "remembers" - simple localStorage approach
          const reminders = JSON.parse(localStorage.getItem('nova_reminders') || '[]');
          reminders.push({text: cmd, hour: hour, created: Date.now()});
          localStorage.setItem('nova_reminders', JSON.stringify(reminders));
          return;
        } else {
          speak('‡¶ï‡ßã‡¶® ‡¶∏‡¶Æ‡ßü ‡¶∏‡ßç‡¶Æ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ‡¶§‡ßá ‡¶ö‡¶æ‡¶ì? ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: "‡¶Ü‡¶Æ‡¶æ‡¶ï‡ßá ‡ßÆ ‡¶ü‡¶æ‡ßü ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡ßã" ‡¶¨‡¶≤‡ßã‡•§');
          return;
        }
      }
      // mood / emotional support
      if (cmd.includes('‡¶Æ‡¶® ‡¶ñ‡¶æ‡¶∞‡¶æ‡¶™') || cmd.includes('‡¶¶‡ßÅ‡¶É‡¶ñ') || cmd.includes('‡¶ï‡¶∑‡ßç‡¶ü')) {
        speak('‡¶ö‡¶ø‡¶®‡ßç‡¶§‡¶æ ‡¶ï‡¶∞‡ßã ‡¶®‡¶æ Dip bhai. ‡¶è‡¶ï‡¶ü‡ßÅ deep breathe ‡¶®‡¶æ‡¶ì ‚Äî ‡¶∏‡¶¨ ‡¶†‡¶ø‡¶ï ‡¶π‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§ ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶õ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶æ‡¶∂‡ßá‡•§');
        return;
      }
      // fallback: if not recognized, try to call online AI (if available) - demo offline response
      // For full AI use, integrate Gemini/OpenAI API on backend and call via fetch.
      speak('‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶Ü‡¶Æ‡¶ø ‡¶†‡¶ø‡¶ï ‡¶¨‡ßÅ‡¶ù‡¶ø‡¶®‡¶ø‡•§ ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶≠‡¶ø‡¶®‡ßç‡¶®‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡¶≤‡ßá ‡¶¶‡¶æ‡¶ì ‡¶¨‡¶æ "Hey Nova" ‡¶¨‡¶≤‡ßã‡•§');
    }

    // ---------- UI buttons ----------
    micBtn.addEventListener('click', () => {
      // toggle listening
      if (!listening) {
        startListening();
      } else {
        stopListening();
      }
      // start recognition explicitly
      startListening();
    });

    btnUpload.addEventListener('click', ()=> {
      speak('Upload panel ‡¶ñ‡ßÅ‡¶≤‡¶õ‡¶ø‡•§');
      window.open('https://forms.gle/eQiyxN8bSS7hdBcH6','_blank');
    });
    btnMusic.addEventListener('click', ()=> {
      speak('‡¶è‡¶ï‡¶ü‡ßÅ ‡¶Æ‡¶ø‡¶â‡¶ú‡¶ø‡¶ï ‡¶ö‡¶æ‡¶≤‡¶æ‡¶ö‡ßç‡¶õ‡¶ø‡•§');
      window.open('https://www.youtube.com/results?search_query=bengali+song','_blank');
    });
    btnTime.addEventListener('click', ()=> {
      const now = new Date();
      speak('‡¶è‡¶ñ‡¶® ‡¶∏‡¶Æ‡ßü ' + now.toLocaleTimeString('bn-BD'));
    });
    btnGreet.addEventListener('click', ()=> {
      speak('üå∏ Ram Ram Dip bhai! ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Nova ‡¶π‡¶æ‡¶ú‡¶ø‡¶∞. ‡¶Ü‡¶ú ‡¶ï‡ßá‡¶Æ‡¶® ‡¶Ü‡¶õ‡ßã?');
    });

    // manual send
    sendBtn.addEventListener('click', ()=> {
      const txt = manualInput.value.trim();
      if(!txt) return;
      appendUser(txt);
      manualInput.value='';
      processCommand(txt.toLowerCase());
    });
    manualInput.addEventListener('keydown', (e)=> { if(e.key==='Enter'){ sendBtn.click(); } });

    // ---------- simple reminder checker (demo) ----------
    function checkReminders() {
      const reminders = JSON.parse(localStorage.getItem('nova_reminders') || '[]');
      if (!reminders.length) return;
      const now = new Date();
      const hour = now.getHours();
      // fire any reminders scheduled for current hour (simple demo)
      const toFire = reminders.filter(r => r.hour === hour);
      toFire.forEach(r => speak('Reminder: ' + r.text));
      // keep reminders (or remove if one-time)
    }
    // check every minute
    setInterval(checkReminders, 60 * 1000);

    // ---------- initial greeting & small UI hint ----------
    setTimeout(()=> {
      appendNova('üå∏ Ram Ram Dip! ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Nova ‡¶π‡¶æ‡¶ú‡¶ø‡¶∞. ‡¶¨‡¶≤‡ßã, ‡¶ï‡ßÄ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá?');
    }, 900);

    // ensure autoscroll
    chatBox.scrollTop = chatBox.scrollHeight;

    // accessibility: if SpeechRecognition not available show note
    if (!SpeechRecognition) {
      appendNova('‡¶¶‡ßÅ‡¶á‡¶•‡ßá‡¶ï‡ßá: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá Voice recognition ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶®‡ßá‡¶á ‚Äî Chrome ‡¶¨‡¶æ Edge ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
      statusText.textContent = 'Voice unsupported';
    }
  </script>
</body>
</html>
